old url:

http://www.old.com/old/old.html

new url:

http://www.new.com/new/old/old.html

new base url:

/new/

links without base:

otherold.html --> otherold.html
older/older.html --> older/older.html
/images/old.gif --> /new/images/old.gif
http://www.old.com/ --> http://www.new.com/new
http://www.old.com/old/older/older.html --> http://www.new.com/new/old/older/older.html

links with relative base:

base: older/older.html --> older/older.html

../otherold.html --> ../otherold.html
/images/old.gif --> /new/images/old.gif

links with absolute base:

base: /old/older/older.html --> /new/old/older/older.html

../otherold.html --> ../otherold.html

links with full base:

base: http://www.old.com/old/older/older.html --> http://www.new.com/new/old/older/older.html

so, the rules are:

base behaves the same as regular urls so no early read required

if the url is relative, leave it alone
if the url is absolute, apply the new context path
if the url is full, check to see if the protocol/host/port are the same, 
	if they are, treat it as through it's an absolute url otherwise, leave it alone

new base url

/new/http://asdfadsfadf.com:23/



